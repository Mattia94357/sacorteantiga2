
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>accomodation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="Styles.css">
    <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <!-- Add Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
  
  <body>



<div class="container-fluid" style="background-color: rgba(98, 98, 102, 0.5);">


    <nav class="navbar navbar-expand-md">

        <div class="container m-2 px-4 d-flex justify-content-center">
            <a href="Home.html"><img class="mx-5" src="/imagesnew/Logo corte antiga new.jpg" width="120px" alt=""></a>
            
            <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false"  aria-label="Toggle-navigation"> <span class="navbar-toggler-icon"></span> </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">

                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a href="SaCorteAntiga.html"  class="nav-link active text-light" aria-current="page">Sa Corte Antiga</a></li>
                    <li class="nav-item"><a href="Accomodation.html"  class="nav-link active text-light" aria-current="page">Prenota ora</a></li>
                   <li class="nav-item"><a href="Leisure.html"  class="nav-link active text-light" aria-current="page">Tempo Libero</a></li>
                    <li class="nav-item"><a href="Gallery.html"  class="nav-link active text-light" aria-current="page">Galleria</a></li>
                    <li class="nav-item"><a href="Contact.html"  class="nav-link active text-light" aria-current="page">Contattaci</a></li>
                
                
                </ul>

                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Cerca</button>
                  </form>


            </div>

        </div>

    </nav>

</div>

<div class="container my-5">

    <div class="row  d-flex justify-content-center align-items-center " style="background-color: seashell;">

        <div class="col-sm-5 p-3 mb-3">
            <h2 style="color: #a59451" class="display-3">Prenota ora</h2>
            <hr class="hr2">
        </div>

            <div class="col-sm-5 m-5">
                <p class="lead">La tua indimenticabile vacanza in Sardegna: fascino tradizionale, comfort moderno e la base perfetta per esplorare l'isola</p>


                    <div class="d-flex justify-content-center align-items-center">
                      
                        <a href="#"><img src="/imagesnew/Booking-Logo.png" alt="" width="150px"></a>
                       
                        
                    </div>
                    <hr>

                    <div class="d-flex justify-content-center align-items-center">
                        <img src="/imagesnew/Booking.com score.png" alt="" class="m-3" styl width="50">
                      
                    
            </div>

            
    </div>

</div>
</div>

<div class="divider2"></div>




<div class="divider2"></div>
<div class="container-fluid d-flex justify-content-center my-5 form-control" id="bookingform">
    <div class="container shadow border p-4">
        <div class="row">
            <div class="col-12 text-center mb-3">
                <h2>Modulo di prenotazione</h2>
                <hr class="hr2">
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <label for="title" class="my-2">Titolo</label>
                <select name="Title" id="title" class="form-control my-2">
                    <option value="1">MR</option>
                    <option value="2">MS</option>
                    <option value="3">MRS</option>
                </select>
            </div>
            <div class="col-9">
                <div class="row my-2">
                    <div class="col">
                        <label for="firstname">Nome</label>
                        <input type="text" id="firstname" class="form-control my-2">
                    </div>
                    <div class="col">
                        <label for="lastname">Cognome</label>
                        <input type="text" id="lastname" class="form-control my-2">
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col">
                        <label for="e-mail">E-Mail</label>
                        <input type="email" id="e-mail" class="form-control my-2">
                    </div>
                    <div class="col">
                        <label for="phone number">Numero di telefono</label>
                        <input type="text" id="phone number" class="form-control my-2">
                    </div>
                </div>
                <div class="row my-2">
                    <div class="col-sm-6">
                        <label for="numofguests">Numero di ospiti </label>
                        <select name="" type="number" id="numofguests" class="form-control my-2">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select> 
                    </div>
                </div>
                
                <!-- Replace your arrivalDate and departureDate input fields with Flatpickr -->

<div class="row my-2">
    <div class="col">
      <label for="arrivalDate">Data di arrivo</label>
      <input type="text" id="arrivalDate" class="form-control my-2">
    </div>
    <div class="col">
      <label for="departureDate">Data di partenza</label>
      <input type="text" id="departureDate" class="form-control my-2">
    </div>
  </div>

  <div class="col">
    <label for="roomtype">Numero di bambini sotto i 6 anni ( 1 bambino allogia gratis!) </label>
    <select class="form-control my-2" name="" id="numofkids">
        <option value="0">0</option>
        <option value="1">1</option>
    </select>
  </div>
</div>
  
<div class="d-flex- justify-content-center">
                <div class="row my-3">
                    <div class="col d-flex justify-content-center">
                        <button role="button" class="btn btn-outline-success" onclick="GetPrice()">Calcola il prezzo</button>
                    </div>
                </div>
                <div class="row my-3">
                    <div class="col d-flex justify-content-center">
                        <p id="totalPrice" class="my-2">Total Price: $0</p>
                    </div>
                </div>
                <div class="row my-3">
                    <div class="col d-flex justify-content-center">
                        <button role="button" class="btn btn-outline-success" onclick="sendEmail()">Richiedi la prenotazione</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p id="status"></p>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>


 
<div class="divider"></div>

    <!-- Footer -->    <!-- Footer -->
<div class="container-fluid bg-dark">

    <div class="container">
    
    <footer class="py-5">
    
        <div class="row d-flex justify-content-center align-items-center ">
    
            <div class="col-3 col-md m-auto">
               <img src="/imagesnew/Logo corte antiga new.jpg" alt="" style="width: 150px;">
                   
                </ul>
            </div>
    
    
            <div class="col-3 col-md mb-3">
                
                <ul class="nav flex-column">
                    <li class="nav-item mb-2 text-light"><a href="SaCorteAntiga.html" class="nav-link p-0">Sa Corte Antiga</a>  </li>
                    <li class="nav-item mb-2 text-light"><a href="Accomodation.html" class="nav-link p-0">Prenota Ora</a> </li>
                    <li class="nav-item mb-2 text-light"><a href="Leisure.html" class="nav-link p-0">Tempo Libero</a> </li>
                 
                   
                </ul>
            </div>
    
    
            
            <div class="col-3 col-md mb-3">
               
                <ul class="nav flex-column">
                    <li class="nav-item mb-2 text-light"><a href="Contact.html" class="nav-link p-0">Contattaci</a> </li>
                    <li class="nav-item mb-2 text-light"><a href="Gallery.html" class="nav-link p-0">Galleria</a> </li>
                    <li class="nav-item mb-2 text-light"><a href="Accomodation.html" class="nav-link p-0">Modulo Prenotazione</a> </li>
                    
                   
                </ul>
            </div>
    
            <div class="col-md-3 offset-md-1 mb-3 d-flex justify-content-center">
                <img src="/imagesnew/airbnb.jpg" alt="" style="height: 130px; max-width: 130px;" class="m-3">
                <img src="/imagesnew/Booking-Logo.png" alt="" style="height: 130px; max-width: 130px;" class="m-3">
          
          
          
              </div>
    
    
    
        </div>
    
        <hr class="text-light">
    
      
    
        <div class="d-flex flex-column flex-sm-row justify-content-center align-items-center py-3 my-4">
    
            <a href="#"><i class="bi bi-google text-light fs-5 m-4"></i></a>
            <a href="#"><i class="bi bi-instagram text-light fs-5 m-4"></i></a>
            <a href="#"><i class="bi bi-twitter text-light fs-5 m-4"></i></a>
            
    
    
        </div>
    
        <div class="d-flex flex-column flex-sm-row justify-content-center py-3 my-4">
    
            <p class="text-light fw-light">Copyright &copy; 2024 Sa Corte Antiga  Inc. All rights reserved</p>
    
    </div>
    
    
    
    </footer>
    
    </div>
    
      </div>





      
<!-- JavaScript code here -->
<script type="text/javascript">
    // Initialize EmailJS with  User ID
    (function(){
      emailjs.init({
        publicKey: "mnyDohtJm2rE-bWEL",
      });
   })();


  // Initialize Flatpickr on both arrivalDate and departureDate fields
  // Unavailable dates array (example)
  let unavailableDates = [
        /* April */ "2025-04-17", "2025-04-18", "2025-04-19", "2025-04-20",  "2025-04-21", "2025-04-22", "2025-04-23",
        /* June */ "2025-06-14","2025-06-15","2025-06-16","2025-06-17","2025-06-18","2025-06-19","2025-06-20","2025-06-21","2025-06-22","2025-06-23","2025-06-24","2025-06-25","2025-06-26","2025-06-27","2025-06-28",
        /* July */ "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-04",
      ];

      // Initialize Flatpickr on both arrivalDate and departureDate fields
      flatpickr("#arrivalDate", {
        dateFormat: "Y-m-d",  // Customize date format as needed
        minDate: "today", // Prevent selecting past dates
        disable: unavailableDates, // Disable dates from the unavailableDates array
      });

      flatpickr("#departureDate", {
        dateFormat: "Y-m-d",  // Customize date format as needed
        minDate: "today", // Prevent selecting past dates
        disable: unavailableDates, // Disable dates from the unavailableDates array
      });

</script>

<script>
function GetPrice() {
    // Get the values from the form
    let numOfGuests = document.getElementById("numofguests").value;
    let arrivalDate = new Date(document.getElementById("arrivalDate").value);
    let departureDate = new Date(document.getElementById("departureDate").value);
    let pricePerNight = 0;
    let totalPrice = 0;

    // Debugging logs to check the values
    console.log("Number of Guests: ", numOfGuests);
    console.log("Arrival Date: ", arrivalDate);
    console.log("Departure Date: ", departureDate);

    // Check for valid dates
    if (arrivalDate >= departureDate) {
        alert("The check-out date must be later than the check-in date.");
        return; // Exit the function if the dates are invalid
    }

    // Price logic based on the number of guests
    if (numOfGuests == 1) {
        pricePerNight = 70;
    } else if (numOfGuests > 3 || numOfGuests < 1) {
        alert("Maximum adults occupancy is 3");
        return; // Exit the function if the number of guests is invalid
    } else {
        pricePerNight = 100;
    }

    // Calculate the number of nights
    let timeDifference = departureDate - arrivalDate;
    let numberOfNights = timeDifference / (1000 * 3600 * 24); // Convert milliseconds to days

    // Debugging log to check the number of nights
    console.log("Number of Nights: ", numberOfNights);

    // Ensure that the number of nights is valid (should be at least 1)
    if (numberOfNights <= 0) {
        alert("Please select a valid stay period.");
        return; // Exit the function if the stay period is invalid
    }

    // Calculate the total price
    totalPrice = numberOfNights * pricePerNight;

    // Display the total price
    document.getElementById("totalPrice").innerText = `Total Price: $${totalPrice}`;
    return totalPrice;
}


// Function to send email with booking details using EmailJS
function sendEmail() {
    // Get the form values
    let firstname = document.getElementById("firstname").value;
    let lastname = document.getElementById("lastname").value;
    let email = document.getElementById("e-mail").value;
    let phone_number = document.getElementById("phone number").value;
    let numofguests = document.getElementById("numofguests").value;
    let numofkids = document.getElementById("numofkids").value
    let arrivalDate = document.getElementById("arrivalDate").value;
    let departureDate = document.getElementById("departureDate").value;
    let totalPrice = document.getElementById("totalPrice").innerText.split('$')[1];

    // Format the full name
    let fullName = firstname + " " + lastname;

    // Send email using EmailJS
    emailjs.send("service_cipo4jj", "template_9rthf6o", {
        from_name: fullName,
        from_email: email,
        phone_number: phone_number,
        number_of_guests: numofguests,
        number_of_kids: numofkids,
        arrival_date: arrivalDate,
        departure_date: departureDate,
        total_price: totalPrice,
        subject: `Booking Request from ${fullName}`,
        to_email: "matt.fonnesu1991@gmail.com"  // Replace with the recipient's email address
    })
    .then(function(response) {
        console.log("Success:", response);
        document.getElementById("status").innerText = "Booking request sent successfully!";
    }, function(error) {
        console.log("Error:", error);  // Log the full error for debugging
        document.getElementById("status").innerText = "Error sending email. Please try again later.";
        alert("Error details: " + JSON.stringify(error));  // Show the error details in an alert for debugging
    });
}

</script>

      
      
      
      
      <script src="javascript.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
<script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
<script type="text/javascript">
   (function(){
      emailjs.init({
        publicKey: "mnyDohtJm2rE-bWEL",
      });
   })();
</script>
      </body>
    </html>